<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login/Signup</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #auth-form, #user-panel, #admin-panel { display: none; }
        #user-panel, #admin-panel { margin-top: 20px; }
        label, input, button { display: block; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Login/Signup</h1>
    <div id="auth-form">
        <form id="login-form">
            <h2>Login</h2>
            <label for="login-phone">Phone Number:</label>
            <input type="text" id="login-phone" required>
            <label for="login-password">Password:</label>
            <input type="password" id="login-password" required>
            <button type="button" onclick="login()">Login</button>
        </form>
        <form id="signup-form">
            <h2>Signup</h2>
            <label for="signup-phone">Phone Number:</label>
            <input type="text" id="signup-phone" required>
            <label for="signup-password">Password:</label>
            <input type="password" id="signup-password" required>
            <button type="button" onclick="signup()">Signup</button>
        </form>
        <form id="admin-login-form">
            <h2>Admin Login</h2>
            <label for="admin-phone">Phone Number:</label>
            <input type="text" id="admin-phone" required>
            <label for="admin-password">Password:</label>
            <input type="password" id="admin-password" required>
            <button type="button" onclick="adminLogin()">Admin Login</button>
        </form>
    </div>
    <div id="user-panel">
        <h2>Welcome <span id="user-phone"></span></h2>
        <p>Balance: <span id="balance">0</span> INR</p>
        <form id="deposit-form">
            <label for="deposit-amount">Deposit Amount:</label>
            <input type="number" id="deposit-amount" min="1" required>
            <button type="button" onclick="deposit()">Deposit</button>
        </form>
        <form id="withdraw-form">
            <label for="withdraw-amount">Withdraw Amount:</label>
            <input type="number" id="withdraw-amount" min="1" required>
            <label for="withdraw-password">Password:</label>
            <input type="password" id="withdraw-password" required>
            <button type="button" onclick="withdraw()">Withdraw</button>
        </form>
        <button onclick="logout()">Logout</button>
    </div>
    <div id="admin-panel">
        <h2>Admin Panel</h2>
        <button onclick="viewUsers()">View Users</button>
        <div id="user-list"></div>
        <button onclick="adminLogout()">Admin Logout</button>
    </div>
    <script>
        // Dummy user storage
        const users = [];
        let currentUser = null;

        function signup() {
            const phone = document.getElementById('signup-phone').value;
            const password = document.getElementById('signup-password').value;

            // Check if user already exists
            const existingUser = users.find(user => user.phone === phone);
            if (existingUser) {
                alert('User already exists');
                return;
            }

            // Add new user with initial balance
            users.push({
                phone: phone,
                password: password, // In a real app, hash the password
                balance: 1000
            });
            alert('Signup successful');
        }

        function login() {
            const phone = document.getElementById('login-phone').value;
            const password = document.getElementById('login-password').value;

            // Check user credentials
            const user = users.find(user => user.phone === phone && user.password === password);
            if (user) {
                currentUser = user;
                document.getElementById('auth-form').style.display = 'none';
                document.getElementById('user-panel').style.display = 'block';
                document.getElementById('user-phone').textContent = user.phone;
                document.getElementById('balance').textContent = user.balance;
            } else {
                alert('Invalid phone number or password');
            }
        }

        function deposit() {
            const amount = parseInt(document.getElementById('deposit-amount').value);
            if (amount > 0) {
                currentUser.balance += amount;
                document.getElementById('balance').textContent = currentUser.balance;
                document.getElementById('deposit-amount').value = '';
            } else {
                alert('Invalid deposit amount');
            }
        }

        function withdraw() {
            const amount = parseInt(document.getElementById('withdraw-amount').value);
            const password = document.getElementById('withdraw-password').value;
            if (amount > 0 && amount <= currentUser.balance) {
                if (password === currentUser.password) {
                    currentUser.balance -= amount;
                    document.getElementById('balance').textContent = currentUser.balance;
                    document.getElementById('withdraw-amount').value = '';
                    document.getElementById('withdraw-password').value = '';
                } else {
                    alert('Incorrect password');
                }
            } else {
                alert('Invalid withdrawal amount or insufficient balance');
            }
        }

        function logout() {
            currentUser = null;
            document.getElementById('auth-form').style.display = 'block';
            document.getElementById('user-panel').style.display = 'none';
            document.getElementById('login-phone').value = '';
            document.getElementById('login-password').value = '';
            document.getElementById('deposit-amount').value = '';
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('withdraw-password').value = '';
        }

        function adminLogin() {
            const phone = document.getElementById('admin-phone').value;
            const password = document.getElementById('admin-password').value;

            // Check admin credentials
            if (phone === '799' && password === '143') {
                document.getElementById('auth-form').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                document.getElementById('user-list').innerHTML = '';
            } else {
                alert('Invalid admin phone number or password');
            }
        }

        function viewUsers() {
            const userListDiv = document.getElementById('user-list');
            userListDiv.innerHTML = '<h3>Users and Balances:</h3>';
            users.forEach(user => {
                const userDiv = document.createElement('div');
                userDiv.textContent = `Phone: ${user.phone}, Balance: ${user.balance} INR`;
                userListDiv.appendChild(userDiv);
            });
        }

        function adminLogout() {
            document.getElementById('auth-form').style.display = 'block';
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('admin-phone').value = '';
            document.getElementById('admin-password').value = '';
        }
    </script>
</body>
</html>
